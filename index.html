<!DOCTYPE html>
<html lang="lv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- SEO: title un meta description ar mÄ“rÄ·a frÄzi -->
  <title>Policistu arodbiedrÄ«ba un citas sadarbÄ«bas organizÄcijas â€“ biedriem.lv</title>
  <meta name="description"
        content="NeatkarÄ«gÄ policistu arodbiedrÄ«ba â€“ policistu arodbiedrÄ«ba LatvijÄ. Biedriem.lv ir kopÄ«ga platforma policistu, IT speciÄlistu un juristu arodbiedrÄ«bÄm.">

  <link rel="stylesheet" href="css/style.css">

  <style>
    .news-ticker {
      background: #123b82;
      color: white;
      padding: 10px 0;
      overflow: hidden;
      white-space: nowrap;
      font-size: 18px;
      font-weight: 500;
      cursor: pointer;
      margin-top: 20px;
      margin-bottom: 4px;
      position: relative;
    }

    .news-track {
      display: inline-block;
      will-change: transform;
      transform: translateX(0);
      transition: transform 0.08s linear;
      padding-left: 100%;
    }

    .org-title {
      text-align: center !important;
      width: 100%;
      display: block;
      font-size: 1.3rem;
      line-height: 1.4;
      padding: 10px 5px;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }

    @media (max-width: 600px) {
      .org-title {
        font-size: 1.5rem;
        padding: 15px 8px;
      }
    }
  </style>
</head>

<body>
  <header class="home-header">
    <h1>NeatkarÄ«gÄ policistu arodbiedrÄ«ba un sadarbÄ«bas organizÄcijas</h1>
    <p>
      Biedriem.lv ir platforma, kur apvienotas policistu arodbiedrÄ«ba, informÄcijas tehnoloÄ£iju speciÄlistu arodbiedrÄ«ba un latvieÅ¡u juristu apvienÄ«ba.
    </p>
  </header>

  <main class="home-main">
    <div class="org-list">
      <a class="org-tile" href="npa/index.html">
        <span class="org-title">
          NeatkarÄ«gÄ policistu arodbiedrÄ«ba â€“ policistu arodbiedrÄ«ba LatvijÄ
        </span>
      </a>

      <a class="org-tile" href="itsa/index.html">
        <span class="org-title">
          InformÄcijas tehnoloÄ£iju speciÄlistu arodbiedrÄ«ba
        </span>
      </a>

      <a class="org-tile" href="lja/index.html">
        <span class="org-title">
          LatvieÅ¡u juristu apvienÄ«ba
        </span>
      </a>
    </div>

    <!-- ApvienotÄ LSM + LV portÄls lenta zem flÄ«zÄ“m -->
    <div class="news-ticker" aria-label="LSM un LV portÄla ziÅ†u lente">
      <span class="news-track" id="newsTickerLsm">
        IelÄdÄ“ ziÅ†as...
      </span>
    </div>
  </main>

  <footer>
    <p>&copy; 2008â€“2025 Biedriem.lv â€“ policistu arodbiedrÄ«ba un sadarbÄ«bas organizÄcijas</p>
  </footer>

  <script>
    // LSM + LV portÄls RSS (pÄrveidoti ar rss2json)
    const RSS_LSM       = "https://api.rss2json.com/v1/api.json?rss_url=https://www.lsm.lv/rss/?lang=lv";
    const RSS_LVPORTALS = "https://api.rss2json.com/v1/api.json?rss_url=https://lvportals.lv/rss";

    const ticker = document.querySelector('.news-ticker');
    const track  = document.getElementById('newsTickerLsm');

    const speed  = 35;   // px sekundÄ“ â€“ lasÄms Ätrums
    const stepMs = 40;   // cik bieÅ¾i pÄrrÄ“Ä·inÄm (ms)

    let offset      = 0;
    let playing     = true;
    let dragging    = false;
    let dragStartX  = 0;
    let offsetStart = 0;

    function extractTitles(data, max = 6) {
      if (!data || !data.items) return [];
      return data.items.slice(0, max).map(item => item.title);
    }

    // IelÄdÄ“jam LSM + LV portÄlu, apvienojam vienÄ sarakstÄ
    Promise.all([
      fetch(RSS_LSM).then(r => r.json()).catch(() => null),
      fetch(RSS_LVPORTALS).then(r => r.json()).catch(() => null)
    ]).then(([lsmData, lvData]) => {
      const lsmTitles = extractTitles(lsmData, 6);
      const lvTitles  = extractTitles(lvData, 6);

      let allTitles = [];
      allTitles = allTitles
        .concat(lsmTitles.map(t => "ğŸ“° " + t))
        .concat(lvTitles.map(t => "âš–ï¸ " + t));

      if (allTitles.length) {
        const text = allTitles.join(" â€¢ ");
        // DublÄ“jam saturu, lai lente var riÅ†Ä·ot
        track.textContent = text + " â€¢ " + text;
      } else {
        track.textContent = "Nav pieejamu LSM vai LV portÄla ziÅ†u.";
      }
    }).catch(() => {
      track.textContent = "NeizdevÄs ielÄdÄ“t ziÅ†u lentes saturu.";
    });

    // AnimÄcija
    function tick() {
      if (!playing || dragging) return;

      offset -= (speed * stepMs) / 1000;
      const trackWidth = track.offsetWidth;

      if (-offset > trackWidth) {
        offset = 0;
      }
      track.style.transform = `translateX(${offset}px)`;
    }

    setInterval(tick, stepMs);

    // Hover â€“ pauze
    ticker.addEventListener('mouseenter', () => {
      playing = false;
    });

    ticker.addEventListener('mouseleave', () => {
      if (!dragging) playing = true;
    });

    // Drag â€œpatÄ«Å¡anaâ€
    ticker.addEventListener('mousedown', (e) => {
      dragging = true;
      playing = false;
      dragStartX = e.clientX;
      offsetStart = offset;
    });

    window.addEventListener('mousemove', (e) => {
      if (!dragging) return;
      const dx = e.clientX - dragStartX;
      offset = offsetStart + dx;
      track.style.transform = `translateX(${offset}px)`;
    });

    window.addEventListener('mouseup', () => {
      if (!dragging) return;
      dragging = false;
      playing = true;
    });
  </script>
</body>
</html>
